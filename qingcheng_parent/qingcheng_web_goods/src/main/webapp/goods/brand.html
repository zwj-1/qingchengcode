<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>品牌管理</title>
    <link rel="stylesheet" href="../css/elementui.css">
</head>
<body>

<div id="app">
    <!--搜索框  行内表单-->
    <el-form :inline="true">
        <el-form-item label="品牌名称">
            <el-input  placeholder="品牌名称" v-model="searchMap.name"></el-input>
        </el-form-item>
        <el-form-item label="品牌首字母" >
            <el-input placeholder="品牌首字母" v-model="searchMap.letter"></el-input>
        </el-form-item >
        <el-button type="primary" @click="fetchDate">搜索</el-button>
        <el-button type="primary" @click="formVisible=true">新增</el-button>
    </el-form>
    <el-table
            :data="tableData"
            style="width: 100%">
        <el-table-column
                prop="id"
                label="id"
                width="180">
        </el-table-column>
        <el-table-column
                prop="name"
                label="名称"
                width="180">
        </el-table-column>
        <el-table-column
                prop="letter"
                label="首字母">
        </el-table-column>
        <el-table-column
                label="图片">
            <template slot-scope="scope">
                <img :src="scope.row">
            </template>
        </el-table-column>
    </el-table>
    <!--分页-->
    <el-pagination
            @size-change="fetchData"
            @current-change.sync="fetchData"
            :current-page="currentPage4"
            :page-sizes="[10, 20, 30, 40]"
            :page-size="size"
            layout="total, sizes, prev, pager, next, jumper"
            :total="total">
    </el-pagination>

    <!--新增弹框-->
    <el-dialog
            title="品牌编译"
            :visible.sync="formVisible">
        <el-form label-width="80px">
            <el-form-item label="品牌名称">
                <el-input  placeholder="品牌名称" v-model="pojo.name"></el-input>
            </el-form-item>
            <el-form-item label="品牌首字母" >
                <el-input placeholder="品牌首字母" v-model="pojo.letter"></el-input>
            </el-form-item >
            <el-form-item label="品牌图片" >
                <el-input placeholder="品牌图片" v-model="pojo.image"></el-input>
            </el-form-item >
            <el-form-item label="品牌排序" >
                <el-input placeholder="品牌排序" v-model="pojo.seq"></el-input>
            </el-form-item >
            <el-button @click="formVisible = false">关 闭</el-button>
            <el-button type="primary" @click="save()">保 存</el-button>
        </el-form>

    </el-dialog>


</div>

</body>

<script src="../js/vue.js"></script>
<script src="../js/axios.js"></script>
<script src="../js/elementui.js"></script>

<script>
    new Vue({
        el: "#app",
        data() {
            return {
                tableData: [],
                currentPage:1,
                size:10,
                total:10,
                searchMap:{},
                formVisible:false,
                pojo:{}

            }
        },
        created() {
           this.fetchDate()
        },
        methods:{
            fetchDate(){
                axios.post(`/brand/findAllBySearchAndPage.do?page=${this.currentPage}&size=${this.size}`,this.searchMap).then(responce=>{
                    this.tableData=responce.data.list;
                    this.total=responce.data.total
                })
            },
            save(){
                axios.post(`/brand/save.do`,this.pojo).then(response=>{
                    this.formVisible=false;
                    this.fetchDate();
                })
            }

        }
    })
</script>
</html>